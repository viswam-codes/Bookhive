<!-- loginPage.ejs -->
<%- include('../partials/userHeader.ejs') %>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-4">
            <div class="login_wrap widget-taber-content p-20 background-white border-radius-5">
                <div class="padding_eight_all bg-white">
                    <div class="heading_s1 text-center">
                        <h3 class="mb-20">Create an Account</h3>
                    </div>
                   
                    <form action="/register" method="post" id="registrationForm">
                        <div class="form-group">
                            <input type="text" id="username" name="username" class="form-control" placeholder="Username">
                            <div id="usernameError" class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <input type="email" id="email" name="email" class="form-control" placeholder="Email">
                            <div id="emailError" class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <input type="password" name="password" id="password" class="form-control" placeholder="Password">
                            <div id="passwordError" class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <input type="password" name="confirmpassword" id="confirmPassword" class="form-control" placeholder="Confirm password">
                            <div id="confirmPasswordError" class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn-primary btn-block hover-up" onclick="validateForm()">Submit &amp; Register</button>
                        </div>
                    </form>

                    <% if(typeof message !== 'undefined'){ %>
                        <p class="message"><%= message %></p>
                    <% } %>
                    <hr>
                    <div class="text-center mb-3">
                        <span>or</span>
                    </div>
                    <ul class="btn-login list_none text-center mb-3">
                        <li><a href="#" class="btn btn-facebook hover-up mb-lg-0 mb-sm-2">Login With Facebook</a></li>
                        <li><a href="#" class="btn btn-google hover-up">Login With Google</a></li>
                    </ul>
                    <div class="text-muted text-center">Already have an account? <a href="#">Sign in now</a></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function validateForm() {
        var username = document.getElementById('username').value;
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        var confirmPassword = document.getElementById('confirmPassword').value;
        var valid = true;

        // Username validation
        if (!username) {
            document.getElementById('usernameError').innerText = "Username is required";
            document.getElementById('usernameError').style.color = "red"; // Set color to red
            valid = false;
        } else {
            document.getElementById('usernameError').innerText = "";
        }

        // Email validation
        if (!email) {
            document.getElementById('emailError').innerText = "Email is required";
            document.getElementById('emailError').style.color = "red"; // Set color to red
            valid = false;
        } else {
            document.getElementById('emailError').innerText = "";
        }

        // Password validation
        if (password !== confirmPassword) {
            document.getElementById('confirmPasswordError').innerText = "Passwords do not match";
            document.getElementById('confirmPasswordError').style.color = "red"; // Set color to red
            valid = false;
        } else {
            document.getElementById('confirmPasswordError').innerText = "";
        }

        if (!isPasswordValid(password)) {
            document.getElementById('passwordError').innerText = "Password must contain at least one uppercase letter, one lowercase letter, one number, and be at least 8 characters long";
            document.getElementById('passwordError').style.color = "red"; // Set color to red
            valid = false;
        } else {
            document.getElementById('passwordError').innerText = "";
        }

        if (valid) {
            document.getElementById('registrationForm').submit(); // Submit the form if validation passes
        }
    }

    function isPasswordValid(password) {
        var regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/;
        return regex.test(password);
    }
</script>


<%- include('../partials/userFooter.ejs') %>
